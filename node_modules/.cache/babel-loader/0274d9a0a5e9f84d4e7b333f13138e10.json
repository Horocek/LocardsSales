{"ast":null,"code":"const fetchData = async (login, pass, card) => {\n  const autorized = await loginUser(login, pass);\n  if (!autorized) return \"Не верный логин/пароль\"; // let bearer = 'Bearer ';\n  // const response = await fetch('https://api.lo.cards/v1/crm/card/100095', {\n  //     method: 'GET',\n  //     withCredentials: true,\n  //     headers: {\n  //         'Authorization': bearer,\n  //         'Content-Type': 'application/json'\n  //     }})\n\n  return autorized;\n};\n\nconst loginUser = async (login, pass) => {\n  const user = {\n    email: login,\n    password: pass\n  };\n  const response = await fetch('https://api.lo.cards/v1/user/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8'\n    },\n    body: JSON.stringify(user)\n  });\n  const result = await response.json();\n  return !result.success ? result.success : result.data;\n};\n\nconst getCrmToken = async JWT => {\n  const response = await fetch('https://api.lo.cards/v1/integration', {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${JWT}`,\n      'Content-Type': 'application/json;charset=utf-8'\n    }\n  });\n  const result = await response.json();\n  return result.data[0].token;\n};\n\nexport { fetchData };","map":{"version":3,"sources":["/Users/maximpodorogin/Desktop/Sales/src/utils/Api.js"],"names":["fetchData","login","pass","card","autorized","loginUser","user","email","password","response","fetch","method","headers","body","JSON","stringify","result","json","success","data","getCrmToken","JWT","token"],"mappings":"AAAA,MAAMA,SAAS,GAAG,OAAOC,KAAP,EAAcC,IAAd,EAAoBC,IAApB,KAA6B;AAC3C,QAAMC,SAAS,GAAI,MAAMC,SAAS,CAACJ,KAAD,EAAQC,IAAR,CAAlC;AACA,MAAI,CAACE,SAAL,EAAgB,OAAO,wBAAP,CAF2B,CAK3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAAOA,SAAP;AACH,CAdD;;AAgBA,MAAMC,SAAS,GAAG,OAAOJ,KAAP,EAAcC,IAAd,KAAuB;AACrC,QAAMI,IAAI,GAAG;AACTC,IAAAA,KAAK,EAAEN,KADE;AAETO,IAAAA,QAAQ,EAAEN;AAFD,GAAb;AAIA,QAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAC,oCAAD,EAAuC;AAC/DC,IAAAA,MAAM,EAAE,MADuD;AAE/DC,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX,KAFsD;AAK/DC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,IAAf;AALyD,GAAvC,CAA5B;AAOE,QAAMU,MAAM,GAAI,MAAMP,QAAQ,CAACQ,IAAT,EAAtB;AACA,SAAO,CAACD,MAAM,CAACE,OAAR,GAAkBF,MAAM,CAACE,OAAzB,GAAmCF,MAAM,CAACG,IAAjD;AACL,CAdD;;AAiBA,MAAMC,WAAW,GAAG,MAAOC,GAAP,IAAe;AAE/B,QAAMZ,QAAQ,GAAG,MAAMC,KAAK,CAAC,qCAAD,EAAwC;AAChEC,IAAAA,MAAM,EAAE,KADwD;AAEhEC,IAAAA,OAAO,EAAE;AACL,uBAAkB,UAASS,GAAI,EAD1B;AAEL,sBAAgB;AAFX;AAFuD,GAAxC,CAA5B;AAOE,QAAML,MAAM,GAAI,MAAMP,QAAQ,CAACQ,IAAT,EAAtB;AACA,SAAOD,MAAM,CAACG,IAAP,CAAY,CAAZ,EAAeG,KAAtB;AACL,CAXD;;AAaA,SACItB,SADJ","sourcesContent":["const fetchData = async (login, pass, card) => {\n    const autorized =  await loginUser(login, pass);\n    if (!autorized) return \"Не верный логин/пароль\";\n    \n    \n    // let bearer = 'Bearer ';\n    // const response = await fetch('https://api.lo.cards/v1/crm/card/100095', {\n    //     method: 'GET',\n    //     withCredentials: true,\n    //     headers: {\n    //         'Authorization': bearer,\n    //         'Content-Type': 'application/json'\n    //     }})\n    return autorized;\n};\n\nconst loginUser = async (login, pass) => {\n    const user = {\n        email: login,\n        password: pass\n    };\n    const response = await fetch('https://api.lo.cards/v1/user/login', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json;charset=utf-8'\n        },\n        body: JSON.stringify(user)\n      });\n      const result =  await response.json();\n      return !result.success ? result.success : result.data;\n}\n\n\nconst getCrmToken = async (JWT) => {\n\n    const response = await fetch('https://api.lo.cards/v1/integration', {\n        method: 'GET',\n        headers: {\n            'Authorization': `Bearer ${JWT}`,\n            'Content-Type': 'application/json;charset=utf-8'\n        }\n      });\n      const result =  await response.json();\n      return result.data[0].token;\n}\n\nexport {\n    fetchData\n};"]},"metadata":{},"sourceType":"module"}